generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Login {
  id_login          Int                @id @default(autoincrement())
  correo            String             @unique
  password          String
  rol               String
  nombre_vendedor   String
  apellido_vendedor String
  fecha_creacion    DateTime           @default(now())
  registros         RegistroBitacora[]
}

model Agente {
  id_agente       Int      @id @default(autoincrement())
  nombre_agente   String
  fecha_creacion  DateTime @default(now())
  registros       RegistroBitacora[]
}

model Estado {
  id_estado      Int                @id @default(autoincrement())
  nombre         String             @unique
  codigo         String             @unique
  orden          Int?
  fecha_creacion DateTime           @default(now())
  registros      RegistroBitacora[]
  destinos       TransicionEstado[] @relation("DestinoEstado")
  origenes       TransicionEstado[] @relation("OrigenEstado")
}

model TransicionEstado {
  id_transicion  Int    @id @default(autoincrement())
  estado_origen  Int
  estado_destino Int
  rol            String
  destino        Estado @relation("DestinoEstado", fields: [estado_destino], references: [id_estado])
  origen         Estado @relation("OrigenEstado", fields: [estado_origen], references: [id_estado])
}

model Tienda {
  id_tienda        Int                @id @default(autoincrement())
  num_tienda       Int
  nombre_tienda    String
  fecha_creacion   DateTime           @default(now())
  RegistroBitacora RegistroBitacora[]
}

model Tiendasinsa {
  id_tiendasinsa     Int                @id @default(autoincrement())
  num_tiendasinsa    Int
  nombre_tiendasinsa String
  fecha_creacion     DateTime           @default(now())
  RegistroBitacora   RegistroBitacora[]
}

model Tipo_Envio {
  id_tipenvio      Int                @id @default(autoincrement())
  nombre_Tipo      String
  fecha_creacion   DateTime           @default(now())
  RegistroBitacora RegistroBitacora[]
}

model OrigenInventario {
  id_originventario Int                @id @default(autoincrement())
  nombre_origen     String
  fecha_creacion    DateTime           @default(now())
  RegistroBitacora  RegistroBitacora[]
}

model TipoPago {
  id_tipopago      Int                @id @default(autoincrement())
  nombre_tipopago  String
  fecha_creacion   DateTime           @default(now())
  RegistroBitacora RegistroBitacora[]
}

model RegistroBitacora {
  id_registro        Int              @id @default(autoincrement())
  num_ticket         Int
  nombre_cliente     String
  direccion_entrega  String?
  flete              Decimal?         @db.Decimal(10, 2)
  fecha_creacion     DateTime         @default(now())
  id_tiendasinsa     Int?
  id_tipenvio        Int
  id_originventario  Int
  id_tienda          Int
  id_tipopago        Int
  id_login           Int
  id_estado          Int
  fecha_entrega      DateTime
  observacion        String?
  monto_factura      Decimal          @db.Decimal(10, 2)
  cedula             String
  telefono           String
  hora_actualizacion DateTime         @updatedAt
  historial_estados  Json?
  id_agente        Int?
  agente           Agente?  @relation(fields: [id_agente], references: [id_agente])
  estado             Estado           @relation(fields: [id_estado], references: [id_estado])
  login              Login            @relation(fields: [id_login], references: [id_login])
  origen_inventario  OrigenInventario @relation(fields: [id_originventario], references: [id_originventario])
  tienda             Tienda           @relation(fields: [id_tienda], references: [id_tienda])
  tiendasinsa        Tiendasinsa?     @relation(fields: [id_tiendasinsa], references: [id_tiendasinsa])
  tipoenvio          Tipo_Envio       @relation(fields: [id_tipenvio], references: [id_tipenvio])
  tipopago           TipoPago         @relation(fields: [id_tipopago], references: [id_tipopago])
}
